{"version":3,"sources":["uni-app:///main.js","webpack:////Users/xiaodu/前端/Tool library/pages/forEmail/forEmail.vue?a242","webpack:////Users/xiaodu/前端/Tool library/pages/forEmail/forEmail.vue?8e5c","webpack:////Users/xiaodu/前端/Tool library/pages/forEmail/forEmail.vue?6e7e","webpack:////Users/xiaodu/前端/Tool library/pages/forEmail/forEmail.vue?d3b3","uni-app:///pages/forEmail/forEmail.vue","webpack:////Users/xiaodu/前端/Tool library/pages/forEmail/forEmail.vue?069c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","consent","showClearIcon","openMail","phoneNum","mailText","words","smsCount","money","sendText","onLoad","methods","userAgreement","uni","title","confirmText","showCancel","content","success","url","inputPhone","clearIcon","inputText","icon","duration","switch1Change","openClick","checkboxChange","randomString","result","getIp","method","reg","sendMail","userPhone","body","out_trade_no","total_fee","ip","provider","timeStamp","nonceStr","package","signType","paySign","forPhone","isOpen","nickName","avatarUrl","beforePage","fail"],"mappings":"iJAAA,MAE2D,MAAgD,MAC3G,aACA,WAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,+ECLX,iIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8BACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,gCCRvB,wHAAu0B,eAAG,G,yICoD10B,aACA,CACAC,gBACA,OAEAC,WACAC,iBACAC,WACAC,YACAC,YACAC,QACAC,WACAC,QACAC,gBAIAC,kBACA,gBACA,iBACA,iBACA,sBAGAC,SAEAC,yBAAA,WACAC,aACAC,aACAC,mBACAC,cACAC,o8CAEAC,oBACA,cACA,aACA,oCACA,+BACA,gCACA,SACAL,aACAC,WACAG,eACAD,cACAE,oBACA,WACAL,cACAM,+BAYAC,uBACA,6BACA,wBACA,sBAEA,uBAIAC,qBACA,iBACA,uBAIAC,qBAEA,IADA,IACA,4BACA,mBACA,qBACA,uBACA,yCAEA,gCACA,iBACAT,aACAU,aACAT,eACAU,eAIA,wCACA,4BAOAC,0BAEA,gBACA,mBACA,kBAEA,mBACA,kBAMAC,qBACAb,aACAC,aACAG,uDACAD,iBAKAW,0BACA,4BAIAC,wBAGA,IAFA,SACA,mEACA,aAAAC,yCACA,UAGAC,iBACA,SAUA,OATAjB,WACAM,2CACAY,cACAb,oBACA,2CACAc,yCAIA,GAIAC,oBACA,0BAEA,yCACA,oCACA,+BACA,gCACA,gBACA,gBACA,gBACA,sBAEApB,WACAM,oDACAnB,MACAkC,YACAC,kBACAC,eACAC,cACAC,gBAEAP,cACAb,oBACA,iBACAL,kBACA0B,iBACAC,2BACAC,0BACAC,mCACAC,eACAC,oBACA1B,oBACAL,WACAM,mDACAnB,MACAkC,YACAW,WACAxC,WACAyC,SACAC,WACAC,YACAZ,gBAEAL,cACAb,oBACA,uBACA,wBACA,gBACAL,gBACAK,mBAEA,wCACA+B,0BAKA,oBACApC,aACAC,WACAG,wBACAD,cACAE,oBACA,WACAL,cACAM,8BASA+B,iBACArC,aACAU,aACAT,cACAU,mBAKAX,qBACAA,aACAC,WACAG,wBACAD,cACAE,oBACA,WACAL,cACAM,mCAaA,sBACAN,aACAU,aACAT,eACAU,eAGA,cACA,cACAX,aACAU,aACAT,gBACAU,eAGAX,aACAU,aACAT,gBACAU,eAIAX,aACAU,aACAT,eACAU,kBASA,c,4DClVA,wHAA0/C,eAAG,G","file":"pages/forEmail/forEmail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-stat.es.js';import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/forEmail/forEmail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./forEmail.vue?vue&type=template&id=bdcf5834&\"\nvar renderjs\nimport script from \"./forEmail.vue?vue&type=script&lang=js&\"\nexport * from \"./forEmail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./forEmail.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/forEmail/forEmail.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./forEmail.vue?vue&type=template&id=bdcf5834&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./forEmail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./forEmail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"wMail\">写信</view>\r\n\t\t<view class=\"uni-flex uni-column email\">\r\n\r\n\t\t\t<!-- 手机号 -->\r\n\t\t\t<li class=\"flex-item flex-item-V phone\">\r\n\t\t\t\t<input class=\"uni-input\" type=\"number\" maxlength=\"11\" :value=\"phoneNum\" placeholder=\"请输入对方手机号\"\r\n\t\t\t\t\t@input=\"inputPhone\" />\r\n\t\t\t\t<icon type=\"clear\" size=\"15\" v-if=\"showClearIcon\" @click=\"clearIcon\" />\r\n\r\n\r\n\t\t\t</li>\r\n\r\n\t\t\t<!-- 短信内容 -->\r\n\t\t\t<li class=\"flex-item flex-item-V mailText\">\r\n\t\t\t\t<textarea class=\"textarea\" maxlength=\"460\" placeholder=\"点击输入短信内容(表白、祝福、吐槽等...)\" v-model=\"mailText\"\r\n\t\t\t\t\t@input=\"inputText\"></textarea>\r\n\r\n\t\t\t\t<text class=\"wordNumber\">{{words}}/460</text>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text class=\"wordMoney\">按照120个字一条计算（不足120字按一条计算），共{{smsCount}}条{{money}}元</text>\r\n\t\t\t\t</view>\r\n\t\t\t</li>\r\n\r\n\t\t\t<!-- 公开信 -->\r\n\t\t\t<li class=\"flex-item flex-item-V openMail\">\r\n\t\t\t\t<view class=\"openText\"><img\r\n\t\t\t\t\t\tsrc=\"https://mp-891a44a8-f007-4426-a7a4-607ad2bc43d0.cdn.bspapp.com/email/wenhao.png\"\r\n\t\t\t\t\t\t@click='openClick'>公开展示</view>\r\n\t\t\t\t<switch color=\"#51aa38\" @change=\"switch1Change\" style=\"transform:scale(0.7)\" />\r\n\t\t\t</li>\r\n\r\n\r\n\r\n\t\t\t<!-- 用户协议 -->\r\n\t\t\t<li class=\"flex-item flex-item-V consent\">\r\n\t\t\t\t<checkbox-group @change=\"checkboxChange\">\r\n\t\t\t\t\t<checkbox :checked=\"consent\" style=\"margin-right: 5px;\" />\r\n\t\t\t\t\t<text class=\"tys\">我已同意<text @click=\"userAgreement\"\r\n\t\t\t\t\t\t\tstyle=\"color: green\">《用户协议》</text>，并遵守和承担相关法律法规</text>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</li>\r\n\t\t\t<li class=\"flex-item flex-item-V sendMail\">\r\n\t\t\t\t<button :class=\"consent?'sendBtn':'sendBtn noBg'\" :disabled=\"!consent\"\r\n\t\t\t\t\t@click=\"sendMail\">{{sendText}}发送</button>\r\n\t\t\t</li>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport sensitiveWord from '../../static/smsSensitiveWord.js' //敏感词汇列表\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t\tconsent: false, //是否勾选协议\r\n\t\t\t\tshowClearIcon: false, //清除手机号符号\r\n\t\t\t\topenMail: 0, //是否公开 默认关闭\r\n\t\t\t\tphoneNum: '', //手机号\r\n\t\t\t\tmailText: '', //短信内容\r\n\t\t\t\twords: 0, //字数\r\n\t\t\t\tsmsCount: 1, //短信条数\r\n\t\t\t\tmoney: 1, //多少钱\r\n\t\t\t\tsendText: '私密' //私密发送？公开发送\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tonLoad() {\n\t\t\tthis.openMail=0\n\t\t\tthis.mailText=''\n\t\t\tthis.phoneNum=''\r\n\t\t\tthis.userAgreement()\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 用户条款\r\n\t\t\tuserAgreement() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '用户协议',\r\n\t\t\t\t\tconfirmText: '我已同意',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tcontent: '为了维护内容质量及友善的社区氛围，平台会依据本规范中的条款对用户和用户发布的内容进行管理。\\n\\n一、 基本原则\\n\\n1. 规范适用于所有用户。\\n2. 须遵纪守法， 对他人保持友善和尊重。 不得发表违背法律法规及社会公德的内容， 用户需要对自己发表的内容负责， 平台有权删除不符合社区规范的内容。\\n3. 用户访问或使用我方产品， 即视为同意接受本规范的全部内容。\\n二、平台可能采取删除违规内容、 终止违规用户使用功能等方式， 对以下违法、 不良信息或存在危害的行为进行处理。\\n1 违反法律法规： 发布违反国家相关法律法规及管理规定的\\n\\n* 信息， 包括但不限于以下几点：\\n* 反对宪法所确定的基本原则 \\n* 危害国家安全， 泄露国家秘密， 颠覆国家政权， 破坏国家统一 \\n* 损害国家荣誉和利益 \\n* 煽动民族仇恨、 民族歧视， 破坏民族团结 \\n* 侮辱、 滥用英烈形象， 否定英烈事迹， 美化粉饰侵略战争行为的 \\n* 破坏国家宗教政策， 宣扬邪教和封、建迷信 \\n* 散布谣言、扰乱社会秩序、破坏社会稳定宣扬淫秽、 色情、 赌博、 暴力、 凶杀、 恐怖或者教唆犯罪 \\n* 煽动非法集会、 结社、 游行、 示威、 聚众扰乱社会秩序*诽谤他人， 泄露他人隐私， 侵害他人合法权 \\n* 含有法律、 行政法规禁止的其他内容的信息 \\n2. 不友善行为，包括但不限于以下几点：\\n\\n* 人身攻击及辱骂他人。\\n*针对以下群体发表祖咒、歧视、漠视生命尊严等性质的言论，群体包括：国籍、地域、性别、性别认同、性倾向、种族、疾病、宗教、残障群体等。\\n*对他人进行诅咒、恐吓或威胁。\\n针对他人的私德、观点立场、素质、能力等方面的贬低或不尊重。\\n* 讽刺他人，阴阳怪气地表达批评。\\n* 对他人使用粗俗用语，并产生了冒犯。\\n3. 发布垃圾广告信息：用户以推广曝光为目的，发布影响用户体验、扰乱社区秩序的内容，或进行相关行为，包括但不限于以下几点：\\n\\n* 多次发布包含售卖产品、提供服务、宣传推广内容的垃圾广告。\\n* 使用严重影响用户体验的违规手段进行恶意营销。\\n4. 恶意行为：滥用产品功能，进行影响用户体验，危及平台安全及损害他人权益的行为。包括但不限于以下几点：\\n* 重复发布干扰正常用户体验的内容。\\n* 发布含有潜在危险的内容，或使用第三方网站伪造跳转链接，如钓鱼网站、木马、病毒网站等。\\n5. 色情低俗信息，包括但不限于以下几点：\\n\\n*包含自己或他人性经验的细节描述或露骨的感受描述\\n* 涉及色情段子、两性笑话的低俗内容\\n* 带有性暗示、性挑逗等易使人产生性联想\\n*展现血腥、惊悚、残忍等致人身心不适\\n*炒作绯闻、丑闻、劣迹等\\n* 宣扬低俗、庸俗、媚俗内容\\n6. 不实信息，包括但不限于以下几点：\\n\\n*可能存在事实性错误或者造谣等内容\\n* 存在事实夸大、伪造虛假经历等误导他人的内容\\n*伪造身份、冒充他人，通过头像、用户名等个人信息暗示自己具有特定身份，或与特定机构或个人存在关联\\n7.传播封建迷信，包括但不限于以下几点：\\n\\n*宣扬鼓励封建迷信等活动，推广算命等理论\\n8. 其他危害行为或内容，包括但不限于以下几点：\\n* 可能引1发未成年人模仿不安全行为和违反社会公德行为、诱导末成年人不良嗜好影响末成年人身心健康的\\n*不当评述自然灾害、重大事故等灾难的\\n* 美化、粉饰侵略战争行为的\\n*法律、行政法规禁止，或可能对网络生态造成不良影响的其他内容',\r\n\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.consent = true\r\n\t\t\t\t\t\t\tconst userPhone = uni.getStorageSync('userPhone');\r\n\t\t\t\t\t\t\tconst nickName = uni.getStorageSync('nickName');\r\n\t\t\t\t\t\t\tconst avatarUrl = uni.getStorageSync('avatarUrl');\r\n\t\t\t\t\t\t\tif (!userPhone && !nickName && !avatarUrl) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: '请先登陆',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//输入手机号，出现删除符号\r\n\t\t\tinputPhone: function(event) {\r\n\t\t\t\tthis.phoneNum = event.detail.value;\r\n\t\t\t\tif (event.detail.value.length > 0) {\r\n\t\t\t\t\tthis.showClearIcon = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showClearIcon = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//清除手机号\r\n\t\t\tclearIcon: function() {\r\n\t\t\t\tthis.phoneNum = '';\r\n\t\t\t\tthis.showClearIcon = false;\r\n\t\t\t},\r\n\r\n\t\t\t//统计字数\r\n\t\t\tinputText() {\r\n\t\t\t\tvar num = 0\r\n\t\t\t\tfor (let i = 0; i < sensitiveWord.length; i++) { //循环敏感词汇列表sensitiveWord\r\n\t\t\t\t\tconst word = sensitiveWord[i];\r\n\t\t\t\t\tconst regex = new RegExp(word, 'gi');\r\n\t\t\t\t\tconst replacement = '*'.repeat(word.length);\r\n\t\t\t\t\tthis.mailText = this.mailText.replace(regex, replacement);\r\n\t\t\t\t}\r\n\t\t\t\tthis.words = this.mailText.length //统计字数\r\n\t\t\t\tif (this.words == 460) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\ttitle: '字数已达上限',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//统计短信条数（65字为一条）Math.ceil()用于将一个数向上取整为最接近它的整数（即不小于它的最小整数），即Math.ceil(2.4)=3。\r\n\t\t\t\tthis.smsCount = Math.ceil(this.words / 120);\r\n\t\t\t\tthis.money = this.smsCount * 1 //金额（每条1元）\r\n\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//公开信开关\r\n\t\t\tswitch1Change(e) {\r\n\r\n\t\t\t\tif (e.detail.value) {\r\n\t\t\t\t\tthis.sendText = '公开'\r\n\t\t\t\t\tthis.openMail = 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sendText = '私密'\r\n\t\t\t\t\tthis.openMail = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//公开解释\r\n\t\t\topenClick() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '公开说明',\r\n\t\t\t\t\tcontent: '开启公开展示，即同意在本程序中公开展示短信内容！\\n\\n仅展示短信内容，不展示个人信息！',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//是否勾选用户条款\r\n\t\t\tcheckboxChange() {\r\n\t\t\t\tthis.consent = !this.consent\r\n\t\t\t},\n\t\t\t\n\t\t\t//随机生成订单号\n\t\t\t randomString() {\n\t\t\t    var result = '';\n\t\t\t\tvar str='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\t\t\t    for (var i = 11; i > 0; --i) result += str[Math.floor(Math.random() * str.length)];\n\t\t\t    return result;\n\t\t\t},\n\t\t\t//获取本机ip地址\n\t\t\tgetIp(){\n\t\t\t\tconst ip=''\n\t\t\t\tuni.request({\n\t\t\t\t    url:'http://pv.sohu.com/cityjson?ie=utf-8',\n\t\t\t\t\tmethod:'POST',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t        const reg = /\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/;\n\t\t\t\t\t\tip = reg.exec(res.data)[0];\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn ip\n\t\t\t},\n\t\t\t\r\n\t\t\t//发送短信\r\n\t\t\tsendMail() {\r\n\t\t\t\tconst reg = /^1[3456789]\\d{9}$/;\r\n\t\t\t\t//验证手机号和内容\r\n\t\t\t\tif (reg.test(this.phoneNum) && this.mailText) {\r\n\t\t\t\t\tconst userPhone = uni.getStorageSync('userPhone');\r\n\t\t\t\t\tconst nickName = uni.getStorageSync('nickName');\r\n\t\t\t\t\tconst avatarUrl = uni.getStorageSync('avatarUrl');\r\n\t\t\t\t\tconst forPhone = this.phoneNum\r\n\t\t\t\t\tconst mailText = this.mailText\r\n\t\t\t\t\tconst isOpen = this.openMail\r\n\t\t\t\t\tconst out_trade_no=this.randomString() //订单号\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.request({ //生成预订单\r\n\t\t\t\t\t\t\t\turl: 'https://1el9898253.oicp.vip/get_prepay_order/',\r\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tuserPhone:userPhone,\r\n\t\t\t\t\t\t\t\t\tbody: '发给'+forPhone+'的短信',\r\n\t\t\t\t\t\t\t\t\tout_trade_no: out_trade_no,\r\n\t\t\t\t\t\t\t\t\ttotal_fee: 100,\r\n\t\t\t\t\t\t\t\t\tip: '127.0.0.1',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif(res.data.code==200){\n\t\t\t\t\t\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\t\t\t\t\t    provider: 'wxpay',// 支付服务提供商，此处为微信支付\n\t\t\t\t\t\t\t\t\t\t\ttimeStamp: res.data.timeStamp,// 时间戳，从预支付订单中获取\n\t\t\t\t\t\t\t\t\t\t\tnonceStr: res.data.nonce_str,// 随机字符串，从预支付订单中获取\n\t\t\t\t\t\t\t\t\t\t\tpackage: 'prepay_id='+res.data.static,// 订单详情扩展字符串，从预支付订单中获取\n\t\t\t\t\t\t\t\t\t\t\tsignType: 'MD5', // 签名算法，固定为 MD5\n\t\t\t\t\t\t\t\t\t\t\tpaySign:res.data.sign,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.request({ //发送该用户的短信详情并保存数据库\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'https://1el9898253.oicp.vip/saveMailMessage/',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserPhone: userPhone,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforPhone: forPhone,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmailText: mailText,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnickName: nickName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tavatarUrl: avatarUrl,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tout_trade_no:out_trade_no\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.static == 200) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst pages = getCurrentPages() //获取当前打开的页面，当前页为最后一页\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst beforePage = pages[pages.length - 2] //获取上一页\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// beforePage.onLoad() //执行上一页onLoad()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(beforePage.$page.fullPath=='/pages/index/index'){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbeforePage.$vm.showModal() //同上，同等效果\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (res.data.static == 500) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '用户登陆失效，请重新登陆！',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../login/login'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tfail: function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '支付失败！',\n\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tuni.clearStorageSync();\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\t\tcontent: '用户登陆失效，请重新登陆！',\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../login/login'\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t}else if (reg.test(this.phoneNum)) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\ttitle: '短信不能为空',\r\n\t\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t} else if (this.mailText) {\r\n\t\t\t\t\t\t\tif (this.phoneNum) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\t\ttitle: '手机号格式错误',\r\n\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\t\ttitle: '手机号不能为空',\r\n\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\ttitle: '内容不能为空',\r\n\t\t\t\t\t\t\t\tduration: 1000,\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.wMail {\r\n\t\tpadding: 10px 15px;\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.email {\r\n\r\n\t\tmargin-right: 10%;\r\n\t\tmargin-left: 5%;\r\n\t\tpadding: 0;\r\n\r\n\t\tli {\r\n\t\t\tborder-radius: 15px;\r\n\t\t\tbackground-color: rgb(255, 255, 255);\r\n\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin-top: 20px;\r\n\t\t\tpadding: 15px 15px;\r\n\r\n\t\t}\r\n\r\n\t\t.phone {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\theight: 25px;\r\n\t\t\tfont-size: 14px;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t.mailText {\r\n\t\t\tfont-size: 14px;\r\n\t\t\tbackground-color: white;\r\n\t\t\tbackground-image: url(https://mp-891a44a8-f007-4426-a7a4-607ad2bc43d0.cdn.bspapp.com/email/sk.png);\r\n\t\t\tbackground-size: 30% 65%;\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t\tbackground-position: 95% 100%;\r\n\r\n\t\t\t.wordNumber {\r\n\t\t\t\tcolor: #afafaf;\r\n\t\t\t\tfont-size: 10px;\r\n\t\t\t}\r\n\r\n\t\t\t.wordMoney {\r\n\t\t\t\tcolor: #77d084;\r\n\t\t\t\tfont-size: 10px;\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\t.consent {\r\n\t\t\t.tys {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tvertical-align: -3px; //与图标对其\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.openMail {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\timg {\r\n\t\t\t\twidth: 18px;\r\n\t\t\t\theight: 18px;\r\n\t\t\t\tvertical-align: -15%;\r\n\t\t\t\tmargin-right: 7px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.sendMail {\r\n\t\t\tpadding: 0;\r\n\t\t\twidth: 105%;\r\n\t\t\tmargin-top: 50px;\r\n\r\n\t\t\t.sendBtn {\r\n\t\t\t\tbackground-color: #51aa38;\r\n\t\t\t\tborder: #51aa38;\r\n\t\t\t\tborder-radius: 25px;\r\n\t\t\t\tcolor: white;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.noBg {\r\n\t\tbackground-color: #d7d7d7 !important;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./forEmail.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./forEmail.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}