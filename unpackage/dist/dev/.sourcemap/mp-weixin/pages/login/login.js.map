{"version":3,"sources":["uni-app:///main.js","webpack:////Users/xiaodu/前端/Tool library/pages/login/login.vue?594d","webpack:////Users/xiaodu/前端/Tool library/pages/login/login.vue?9743","webpack:////Users/xiaodu/前端/Tool library/pages/login/login.vue?0bad","webpack:////Users/xiaodu/前端/Tool library/pages/login/login.vue?8598","uni-app:///pages/login/login.vue","webpack:////Users/xiaodu/前端/Tool library/pages/login/login.vue?f0be"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","avatarUrl","nickName","upImgurl","showText","methods","onChooseAvatar","getName","login","cloudPath","filePath","console","uni","provider","success","url","method","code","name","iv","encryptedData","beforePage","title","duration","icon"],"mappings":"2IAAA,MAE2D,MAAgD,MAC3G,aACA,WAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,+ECLX,iIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,gCCRvB,wHAAo0B,eAAG,G,iHC+Bv0B,U,EAGA,CACAC,gBACA,OACAC,uFACAC,YACAC,YACAC,cAGAC,SAGAC,2BACA,kCACA,kBAIAC,oBACA,8BAOAC,kBAAA,WAEA,yBACA,cAEA,SACA,kBACA5B,eACA,qBACA,+CACAA,oBACA6B,YACAC,aACA,kBACA,oBACAC,sBAEAC,SACAC,kBACAC,oBAGAF,WACAG,iDACAC,cACAhB,MACAiB,YACAC,gBACAH,eACAI,KACAC,iBAEAN,oBACA,uBACAF,yCACAA,wCACAA,iDACA,wBACA,gBACAA,gBACAE,mBAEA,0CACAO,0BAMAT,aACAU,cACAC,aACAC,8BAmBA,cAOAZ,aACAU,cACAC,aACAC,eATAZ,aACAU,gBACAC,aACAC,kBAeA,c,4ECtJA,wHAAu/C,eAAG,G","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-stat.es.js';import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<view class=\"loginMsg\">\r\n\r\n\t\t\t<view class=\"img\">\r\n\t\t\t\t<button open-type=\"chooseAvatar\" class=\"mini-btn\" hover-class=\"none\" @chooseavatar=\"onChooseAvatar\">\r\n\t\t\t\t\t<img :src=\"avatarUrl\"><span class=\"imgText\" v-if='showText'>更换图片</span>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"nickeName\">\r\n\t\t\t\t<text>昵称</text>\r\n\t\t\t\t<input type=\"nickname\" @focus=\"getName\" @blur=\"getName\" maxlength=\"8\" class=\"inputName\"\r\n\t\t\t\t\tplaceholder=\"请输入昵称\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t\r\n\r\n\r\n\t\t\t<view class=\"loginBtn\">\n\t\r\n\t\t\t\t<button type=\"primary\" form-type=\"submit\" size=\"default\" open-type=\"getPhoneNumber\" @getphonenumber=\"login\">登陆</button>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tnextTick\r\n\t} from \"vue\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tavatarUrl: \"https://mp-891a44a8-f007-4426-a7a4-607ad2bc43d0.cdn.bspapp.com/email/0.png\",\r\n\t\t\t\tnickName: '',\n\t\t\t\tupImgurl:'',\r\n\t\t\t\tshowText: true,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\t//选择头像获取url\r\n\t\t\tonChooseAvatar(e) {\r\n\t\t\t\tthis.avatarUrl = e.detail.avatarUrl\r\n\t\t\t\tthis.showText = false\r\n\t\t\t},\r\n\r\n\t\t\t// 获取昵称\r\n\t\t\tgetName(e) {\r\n\t\t\t\tthis.nickName = e.detail.value\r\n\r\n\t\t\t},\r\n\t\t\t\n\t\t\t\n\t\t\t\r\n\t\t\t//登陆，保存头像昵称到缓存，返回上一页并刷新\r\n\t\t\tlogin(e) {\r\n\t\t\t\t\n\t\t\t\tconst encryptedData=e.detail.encryptedData\n\t\t\t\tconst iv=e.detail.iv\n\t\t\t\t\n\t\t\t\tif(encryptedData&&iv){\n\t\t\t\t\tif (this.nickName) {\n\t\t\t\t\t\twx.cloud.init()\n\t\t\t\t\t\tconst filePath = this.avatarUrl\n\t\t\t\t\t\tlet cloudPath = \"userPhoto/\" + this.nickName + Date.now() + \".jpg\";\n\t\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t\t      cloudPath,\n\t\t\t\t\t\t      filePath: filePath\n\t\t\t\t\t\t    }).then((res)=>{\n\t\t\t\t\t\t\t\tthis.upImgurl=res.fileID\n\t\t\t\t\t\t\t\tconsole.log(res.fileID)\n\t\t\t\t\t\t\t\t//验证openid\n\t\t\t\t\t\t\t\tuni.login({\n\t\t\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 发送 code 到后端，后端通过 code 获取 session_key 和 openid\n\t\t\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\t\t\turl: 'https://1el9898253.oicp.vip/getSessionKey/',\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tcode: res.code,\n\t\t\t\t\t\t\t\t\t\t\t\tname: this.nickName,\n\t\t\t\t\t\t\t\t\t\t\t\turl: this.upImgurl,\n\t\t\t\t\t\t\t\t\t\t\t\tiv:iv,\n\t\t\t\t\t\t\t\t\t\t\t\tencryptedData:encryptedData\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif(res.data.phoneNumber){\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('avatarUrl', this.upImgurl);\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('nickName', this.nickName);\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('userPhone', res.data.phoneNumber);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst pages = getCurrentPages() //获取当前打开的页面，当前页为最后一页\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst beforePage = pages[pages.length - 2] //获取上一页\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// beforePage.onLoad() //执行上一页onLoad()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(beforePage.$page.fullPath=='/pages/myself/myself'){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbeforePage.$vm.getSisson() //同上，同等效果\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"再试一次！\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t// });\n\t\t\t\t\t}\n\t\t\t\t}\r\n\t\t\t\t else if (!this.nickName) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"昵称不能为空！\",\r\n\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"登陆失败！\",\n\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.loginMsg {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\r\n\r\n\t\t.img {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tmargin-top: 100px;\r\n\r\n\t\t\tbutton::after {\r\n\t\t\t\tborder: none;\r\n\t\t\t}\r\n\r\n\t\t\timg {\r\n\t\t\t\twidth: 80px;\r\n\t\t\t\theight: 80px;\r\n\t\t\t\tborder-radius: 15px;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t.imgText {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t\tcolor: dimgray;\r\n\t\t\t\tright: 22px;\r\n\t\t\t\ttop: 25px;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\t.nickeName {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tborder-top: 2px solid rgba(232, 232, 232, 0.5);\r\n\t\t\tborder-bottom: 2px solid rgba(232, 232, 232, 0.5);\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.inputName {\r\n\t\t\t\t// text-align: center;\r\n\t\t\t\tpadding: 15px 15px;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 36vw;\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttext {\r\n\t\t\t\tpadding: 15px 15px;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.loginBtn {\r\n\t\t\tmargin-top: 40vh;\r\n\r\n\t\t\tbutton {\r\n\t\t\t\tpadding: 0 70px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}